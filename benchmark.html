<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Claine - Model Comparison Benchmark</title>
  <link rel="icon" href="data:,">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: #0f172a; color: #e2e8f0; padding: 24px; line-height: 1.5; }
    h1 { font-size: 1.5rem; font-weight: 600; margin-bottom: 4px; }
    .subtitle { color: #94a3b8; font-size: 0.875rem; margin-bottom: 24px; }
    .controls { display: flex; gap: 16px; align-items: flex-start; margin-bottom: 24px; }
    .control-group { display: flex; flex-direction: column; gap: 6px; }
    .control-group label { font-size: 0.75rem; font-weight: 500; color: #94a3b8; text-transform: uppercase; letter-spacing: 0.05em; }
    textarea { background: #1e293b; border: 1px solid #334155; border-radius: 8px; color: #e2e8f0; padding: 10px 12px; font-family: 'SF Mono', 'Fira Code', monospace; font-size: 0.8125rem; resize: vertical; width: 400px; min-height: 120px; }
    textarea:focus { outline: none; border-color: #3b82f6; }
    select { background: #1e293b; border: 1px solid #334155; border-radius: 8px; color: #e2e8f0; padding: 10px 12px; font-size: 0.875rem; cursor: pointer; }
    select:focus { outline: none; border-color: #3b82f6; }
    button { background: #3b82f6; color: white; border: none; border-radius: 8px; padding: 10px 20px; font-size: 0.875rem; font-weight: 500; cursor: pointer; transition: background 0.15s; }
    button:hover { background: #2563eb; }
    button:disabled { background: #334155; color: #64748b; cursor: not-allowed; }
    .btn-row { display: flex; align-items: flex-end; gap: 12px; }
    #progress { background: #1e293b; border: 1px solid #334155; border-radius: 8px; padding: 12px 16px; max-height: 200px; overflow-y: auto; font-family: 'SF Mono', 'Fira Code', monospace; font-size: 0.75rem; margin-bottom: 24px; display: none; }
    #progress .line { padding: 2px 0; }
    #progress .line.error { color: #f87171; }
    #progress .line.success { color: #4ade80; }
    #progress .line.info { color: #60a5fa; }
    #results { margin-top: 24px; }
    table { width: 100%; border-collapse: collapse; background: #1e293b; border-radius: 8px; overflow: hidden; }
    th, td { padding: 10px 14px; text-align: left; border-bottom: 1px solid #334155; font-size: 0.8125rem; }
    th { background: #0f172a; font-weight: 500; color: #94a3b8; text-transform: uppercase; font-size: 0.6875rem; letter-spacing: 0.05em; }
    td.metric-label { font-weight: 500; color: #cbd5e1; white-space: nowrap; }
    .accuracy-high { color: #4ade80; }
    .accuracy-medium { color: #fbbf24; }
    .accuracy-low { color: #f87171; }
    .detail-toggle { cursor: pointer; color: #3b82f6; font-size: 0.75rem; text-decoration: underline; }
    .detail-toggle:hover { color: #60a5fa; }
    .detail-section { display: none; margin-top: 16px; }
    .detail-section.open { display: block; }
    .detail-table th { font-size: 0.625rem; }
    .detail-table td { font-size: 0.75rem; padding: 6px 10px; }
    .correct { color: #4ade80; }
    .incorrect { color: #f87171; }
    .raw-output { max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; cursor: pointer; color: #94a3b8; }
    .raw-output:hover { white-space: normal; word-break: break-all; }
  </style>
</head>
<body>
  <h1>Model Comparison Benchmark</h1>
  <p class="subtitle">Evaluate LLM models for email priority scoring accuracy, speed, and reliability</p>

  <div class="controls">
    <div class="control-group">
      <label>Model IDs (one per line)</label>
      <textarea id="modelList">onnx-community/Llama-3.2-3B-Instruct-ONNX
onnx-community/Phi-3.5-mini-instruct-onnx-web
HuggingFaceTB/SmolLM2-1.7B-Instruct
onnx-community/Llama-3.2-1B-Instruct-q4f16
onnx-community/DeepSeek-R1-Distill-Qwen-1.5B-ONNX</textarea>
    </div>
    <div class="control-group">
      <label>Provider</label>
      <select id="provider">
        <option value="webgpu">WebGPU</option>
        <option value="wasm">WASM</option>
      </select>
      <label>Quantization</label>
      <select id="dtype">
        <option value="auto">Auto (model default)</option>
        <option value="q4f16">q4f16 (4-bit, recommended)</option>
        <option value="fp16">fp16 (half precision)</option>
        <option value="fp32">fp32 (full precision)</option>
        <option value="q4">q4 (4-bit WASM)</option>
      </select>
      <div class="btn-row">
        <button id="runBtn">Run Benchmark</button>
        <button id="stopBtn" disabled style="background:#ef4444">Stop</button>
      </div>
    </div>
  </div>

  <div id="progress"></div>
  <div id="results"></div>

  <script type="module" src="/src/benchmark/main.ts"></script>
</body>
</html>
